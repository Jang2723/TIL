## ğŸ’¡RESTful êµ¬í˜„
## Article ì„œë¹„ìŠ¤
ê²Œì‹œê¸€ì„ ê²Œì‹œí•˜ê¸° ìœ„í•œ ì„œë¹„ìŠ¤ë¥¼ êµ¬ì„±

### `Article` & `ArticleDto` Entity
```java
@Getter
@Entity
@NoArgsConstructor
public class Article {
    @Id
    @GeneratedValue(strategy = GenerationType.IDENTITY)
    private Long id;

    @Setter
    private String title;
    @Setter
    @Lob
    private String content;
    @Setter
    private String writer;

    // ...
}
```
- ì¼ë°˜ì ì¸ ê²Œì‹œê¸€ì„ í‘œí˜„í•˜ê¸° ìœ„í•œ JPA Entity
- ìœ„ì˜ Entityê°€ ì‹¤ì œë¡œ ë°ì´í„°ë² ì´ìŠ¤ì— ì €ì¥ì´ ë  í˜•íƒœë¼ë©´,
    - ì„œë²„ì™€ í´ë¼ì´ì–¸íŠ¸ê°€ ì£¼ê³ ë°›ì„ ë°ì´í„°ì˜ í‘œí˜„ í˜•ì‹ì„ DTOê°ì²´ë¡œ í‘œí˜„

```java
@Getter
@ToString
@NoArgsConstructor
public class ArticleDto {
    private Long id;
    @Setter
    private String title;
    @Setter
    private String content;
    @Setter
    private String writer;

    // ...
}
```
---
### URLêµ¬ì„±
- ì‘ì—…ì„ ìœ„í•œ URLì´ ìì›ì„ ì‹ë³„í•  ìˆ˜ ìˆë„ë¡ URL êµ¬ì„±
- ê¸°ë³¸ URLì€ ë³µìˆ˜í˜•ìœ¼ë¡œ êµ¬ì„±
- ë‹¨ì¼ ë°ì´í„°ë¥¼ ìš”ì²­í•  ë•ŒëŠ” URLì´ í•´ë‹¹ ìì›ì„ ì‹ë³„í•  ìˆ˜ ìˆëŠ” `id`ë¥¼ í¬í•¨í•˜ë„ë¡ êµ¬ì„±

> ğŸ’¡ `/articles` : ì „ì²´ ê²Œì‹œê¸€ë“¤ì— ëŒ€í•´ì„œ ì‘ì—…í•˜ê¸° ìœ„í•œ URL   
> ğŸ’¡ `/articles/{id}` : ì–´ë–¤ íŠ¹ì • ê²Œì‹œê¸€ì— ëŒ€í•´ì„œ ì‘ì—…í•˜ê¸° ìœ„í•œ URL

### Methodì— ë”°ë¥¸ ê¸°ëŠ¥ ì •ì˜
- URLë¡œ í‘œí˜„ëœ ìì›ì— ì–´ë–¤ í–‰ë™ì„ í• ì§€ë¥¼ HTTP Methodë¡œ íŠ¹ì •ì§“ë„ë¡ êµ¬ì„±í•˜ëŠ” ê²ƒ => ğŸ’¡ RESTful ì„¤ê³„ ì›ì¹™
```text
- CREATE : ìƒˆë¡œìš´ ìì› ìƒì„±, POST Method ì‚¬ìš©
- READ : ì´ë¯¸ ì¡´ì¬í•˜ëŠ” ìì› ì¡°íšŒ (ë˜ëŠ” íšŒìˆ˜), GET Method ì‚¬ìš©
- UPDATE : ì´ë¯¸ ì¡´ì¬í•˜ëŠ” ìì› ìˆ˜ì •, PUT Method ì‚¬ìš©
- DELETE : ì‚­ì œí•˜ê¸° ìœ„í•œ ìì›, DELETE Method ì‚¬ìš©
```
- ë°ì´í„°ê°€ ë‹´ê¸´ ìš”ì²­ì„ ì—¬ëŸ¬ë²ˆ ë³´ë‚¼ë–„, ê²°ê³¼ê°€ ì—¬ëŸ¬ë²ˆ ë°˜ì˜ => `POST`
- ë°ì´í„°ê°€ ë‹´ê¸´ ìš”ì²­ì„ ì—¬ëŸ¬ë²ˆ ë³´ë‚¼ë–„, í•œë²ˆ ë³´ë‚¼ë•Œì™€ ê²°ê³¼ê°€ ê°™ìœ¼ë©´ => `PUT`

### URLê³¼ Method ì¡°í•©
`@RequestMapping` êµ¬ì„±
- ê²Œì‹œê¸€ ìƒì„± : `POST /articles`
- ê²Œì‹œê¸€ ì „ì²´ ì¡°íšŒ : `GET /articles`
- ê²Œì‹œê¸€ ë‹¨ì¼ ì¡°íšŒ : `GET /articles/{id}`
- ê²Œì‹œê¸€ ìˆ˜ì • : `PUT /articles/{id}`
- ê²Œì‹œê¸€ ì‚­ì œ : `DELETE /articles/{id}`

---
### `ArticleController`
- ë°ì´í„°ë¥¼ ì£¼ê³ ë°›ê¸° ìœ„í•œ `Controller` êµ¬ì„±
    - => `@Controller` ëŒ€ì‹  **`@RestController`** ì‚¬ìš©
    - `@RestController`ëŠ” ëª¨ë“  í•¸ë“¤ëŸ¬ ë©”ì„œë“œì— ëŒ€í•´ `@ResponseBody`ë¥¼ ë¶™ì—¬ì¤Œ -> DTO ê°ì²´ë¥¼ í™œìš©í•´ë„ JSON í˜•íƒœë¡œ ì‘ë‹µ
```java
@RestController
@RequestMapping("/articles")
public class ArticleController {
    private final ArticleService service;

    @PostMapping // ìƒì„±
    public ArticleDto create(
            @RequestBody 
            ArticleDto dto) {
        return service.createArticle(dto);
    }

    @GetMapping // ì „ì²´ ì¡°íšŒ
    public List<ArticleDto> readAll() {
        return service.readArticleAll();
    }

    @GetMapping("/{id}") // ë‹¨ì¼ ì¡°íšŒ
    public ArticleDto read(
            @PathVariable("id") 
            Long id
    ) {
        return service.readArticle(id);
    }

    @PutMapping("/{id}")
    public ArticleDto update(
            @PathVariable("id") 
            Long id, 
            @RequestBody 
            ArticleDto dto) {
        return service.updateArticle(id, dto);
    }

    @DeleteMapping("/{id}")
    public void delete(
            @PathVariable("id")
            Long id
    ) {
        service.deleteArticle(id);
    }
}
```
---
### `ArticleService` ì™€  `ArticleRepository`
- `ArticleService`
```java
@Service
@RequiredArgsConstructor
public class ArticleService {
    private final ArticleRepository repository;

    public ArticleDto createArticle(ArticleDto dto) {
        Article newArticle = new Article();
        newArticle.setTitle(dto.getTitle());
        newArticle.setWriter(dto.getWriter());
        newArticle.setContent(dto.getContent());
        return ArticleDto.fromEntity(repository.save(newArticle));
    }

    public ArticleDto readArticle(Long id) {
        Optional<Article> optionalArticle
                = repository.findById(id);
        if (optionalArticle.isPresent()) {
            return ArticleDto.fromEntity(optionalArticle.get());
        } else throw new ResponseStatusException(HttpStatus.NOT_FOUND);
    }

    public List<ArticleDto> readArticleAll() {
        List<ArticleDto> articleList = new ArrayList<>();
        for (Article entity: repository.findAll()) {
            articleList.add(ArticleDto.fromEntity(entity));
        }
        return articleList;
    }

    public ArticleDto updateArticle(Long id, ArticleDto dto) {
        Optional<Article> optionalArticle
                = repository.findById(id);
        if (optionalArticle.isPresent()) {
            Article targetEntity = optionalArticle.get();
            targetEntity.setTitle(dto.getTitle());
            targetEntity.setWriter(dto.getWriter());
            targetEntity.setContent(dto.getContent());
            return ArticleDto.fromEntity(repository.save(targetEntity));
        } else throw new ResponseStatusException(HttpStatus.NOT_FOUND);
    }

    public void deleteArticle(Long id) {
        if (repository.existsById(id))
            repository.deleteById(id);
        else throw new ResponseStatusException(HttpStatus.NOT_FOUND);
    }
}
```
- `readArticle` ë©”ì„œë“œëŠ” íŠ¹ì • IDë¥¼ ê¸°ë°˜ìœ¼ë¡œ í•œ ê²Œì‹œê¸€ ì¡°íšŒ
    - í•´ë‹¹ IDë¥¼ ê¸°ë°˜ìœ¼ë¡œ í•˜ëŠ” ê²Œì‹œê¸€ì´ ì¡´ì¬í•˜ì§€ ì•Šìœ¼ë©´ ì˜ˆì™¸ ë°œìƒì‹œì¼œì•¼ í•¨


- `readArticleAll` ë©”ì„œë“œëŠ” ëª¨ë“  ê²Œì‹œê¸€ì„ ì¡°íšŒ
    - ê²Œì‹œê¸€ì´ í•˜ë‚˜ë„ ì—†ëŠ” ê²½ìš°ì—ëŠ” ë¹ˆ ë¦¬ìŠ¤íŠ¸ë¥¼ ë°˜í™˜
- `ArticleRepository`
```java
public interface ArticleRepository extends JpaRepository<Article, Long> {}
```
