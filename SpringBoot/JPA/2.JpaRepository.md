## JPA
### JpaRepository<T, ID>
- JPAëŠ” `EntityManager`ë¼ëŠ” ê°ì²´ë¥¼ í™œìš©í•˜ì—¬ ë°ì´í„°ë² ì´ìŠ¤ì™€ ì†Œí†µ
- `EntityManager`ë¥¼ ì¶”ìƒí™” í•˜ì—¬ ë°ì´í„°ë² ì´ìŠ¤ì— ì ‘ê·¼í•  ìˆ˜ ìˆë„ë¡ ë„ì™€ì£¼ëŠ” ê²ƒì´ `Repository` ì¸í„°í˜ì´ìŠ¤
- ê±°ê¸°ì— CRUDë¥¼ ìœ„í•œ ê¸°ì´ˆ ë©”ì„œë“œ, í˜ì´ì§€ êµ¬ë¶„ ë° ì •ë ¬ ê¸°ëŠ¥ì´ ì¶”ê°€ ëœ ê²ƒì´ `JpaRepository
`
> ğŸ’¡ JPAëŠ” `EntityManager`ë¥¼ ì‚¬ìš©, Spring Data JPAëŠ” `JapaRepository` ì‚¬ìš©

```java
public interface StudentRepository
        extends JpaRepository<Student, Long> {
                   // ì‚¬ìš©í•  Entity í´ë˜ìŠ¤, í•´ë‹¹ í´ë˜ìŠ¤ì˜ PK íƒ€ì…
}
```
- ì‚¬ìš©í•˜ê³ ì í•˜ëŠ” `interface`ë¥¼ ë§Œë“¤ê³  `JpaRepository`ë¥¼ ìƒì†ë°›ìœ¼ë©´ Spring Data JPAê°€ í•´ë‹¹ `interface` Beanì„ ìƒì„±
- ë‹¤ë¥¸ í´ë˜ìŠ¤ì—ì„œ êµ¬í˜„ì²´ë¥¼ ì£¼ì…ë°›ì•„ ì‚¬ìš© ê°€ëŠ¥! (ex. Service.java)
```java
@Service
public class StudentService {
    private final StudentRepository studentRepository;
    
    public StudentService(StudentRepository studentRepository) {
        this.studentRepository = studentRepository;
    }
}
```
----
### CREATE
- ìƒˆë¡œìš´ `Entity` ê°ì²´ë¥¼ ë§Œë“¤ê³ 
- `repository.save()`ë©”ì„œë“œì— ì¸ìë¡œ ì „ë‹¬
```java
@Service
public class StudentService {
    private final StudentRepository studentRepository;
    
    public void createStudent(
            String name,
            Integer age,
            String phone,
            String email,
            Long advisorId
    ) {
        Student student = new Student();
        student.setName(name);
        student.setAge(age);
        student.setPhone(phone);
        student.setEmail(email);
        studentRepository.save(student);
    }

    // ...
}
```

### READ - readAll, readOne
- ì „ì²´ ì¡°íšŒ( readAll ) : `findAll()`
```java
public List<Student> readStudentAll() {
        return studentRepository.findAll();
}
```
- ë‹¨ì¼ ì¡°íšŒ( readOne ) : `findById()` => `Optional` ë°˜í™˜
```java
public Student readStudent(Long id) {
        return studentRepository.findById(id).orElse(null);
}  
```

### UPDATE
- Entity ì¡°íšŒ, ìˆ˜ì • í›„ `save()`
- `save()`ì˜ ê²°ê³¼ëŠ” ìƒˆë¡œ ì‘ì„±ëœ ë ˆì½”ë“œë¥¼ ë‚˜íƒ€ë‚´ëŠ” Entity ê°ì²´ ë°˜í™˜
```java
  public void update(
          // ìˆ˜ì •í•  ë°ì´í„°ì˜ PK
          Long id,
          // ìˆ˜ì •í•  ë°ì´í„°
          String name,
          Integer age,
          String phone,
          String email
  ) {
      // 1. ì—…ë°ì´íŠ¸í•  ëŒ€ìƒ ë°ì´í„°ë¥¼ ì°¾ê³ ,
      Student target = 
              studentRepository.findById(id).orElse(new Student());        
      // 2. ë°ì´í„°ì˜ ë‚´ìš©ì„ ì „ë‹¬ë°›ì€ ë‚´ìš©ìœ¼ë¡œ ê°±ì‹ 
      target.setName(name);
      target.setAge(age);
      target.setPhone(phone);
      target.setEmail(email);
      // 3. repository.save() ë¥¼ ì´ìš©í•˜ì—¬ ì €ì¥
      studentRepository.save(target);
  }  
```

### DELETE
- `delete()`ë¥¼ ì´ìš©í•´ ì‹¤ì œ `@Entity`ì¸ìŠ¤í„´ìŠ¤ ì „ë‹¬ í›„ ì‚­ì œ
- `deleteById(id)`ë¥¼ ì´ìš©í•´ PKë¥¼ ê¸°ì¤€ìœ¼ë¡œ ì‚­ì œ
```java
    // ...
    public void deleteStudent(Long id) {
        Student targetEntity = 
                studentRepository.findById(id).orElse(new Student());
        studentRepository.delete(targetEntity);
        // or
        studentRepository.deleteById(id);
    }
}
```
---
### Query Methods
- JpaRepositoryì— ë©”ì„œë“œë¥¼ ì¶”ê°€í•˜ë©´ ë‹¤ì–‘í•œ ë°©ì‹ì˜ ì¡°íšŒê°€ ê°€ëŠ¥
- ì‘ë™í•˜ëŠ” ê¸°ì¤€ì€ ë©”ì„œë“œ ì´ë¦„
- `SELECT LIKE`
```java
// SELECT * FROM students WHERE email LIKE '%?';
List<Student> findAllByEmailEndingWith(String email);

//SELECT * FROM students WHERE phone LIKE '%?';
List<Student> findAllByPhoneStartingWith(String phone);
```


- `SELECT ORDER BY`
```java
// SELECT * FROM student ORDER BY name;
List<Student> findAllByOrderByName();

// SELECT * FROM student ORDER BY age DESC;
List<Student> findAllByOrderByAgeDesc();
```

- `SELECT WHERE`
```java
// SELECT * FROM student WHERE age <= ?;
List<Student> findAllByAgeLessThanEqual(Integer age);
```

- `SELECT IN`
```java
// SELECT * FROM student WHERE age IN (10, 20, 30, 40, 50);
List<Student> findAllByAgeIn(List<Integer> ages);
```

- `SELECT BETWEEN`
```java
// SELECT * FROM student WHERE age BETWEEN 30 AND 40;
List<Student> findAllByAgeBetween(Integer over, Integer under);
```