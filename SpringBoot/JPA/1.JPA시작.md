## JPA
### JPA ì‹œì‘
### Object Relational Mapping(ORM)
- ê°ì²´ ì§€í–¥ì  ê´€ì ì—ì„œ ê°ì²´ë¥¼ ì‚¬ìš©í•˜ì—¬ ê´€ê³„í˜• ë°ì´í„°ë² ì´ìŠ¤ë¥¼ ì‚¬ìš©í•˜ëŠ” ê¸°ìˆ 
- ê°ì²´ë¥¼ í…Œì´ë¸” ë° ë ˆì½”ë“œì— ë§¤í•‘
- ìƒì„ ì„± ì¦ê°€, ë°ì´í„° ë³€í™˜ ê³¼ì • ê°„ì†Œí™”ë¡œ ì½”ë“œ ì¤‘ë³µ ê°ì†Œ, ë°ì´í„°ë² ì´ìŠ¤ ì˜ì¡´ì„± ê°ì†Œ

> ğŸ’¡ JPAí”„ë¡œì íŠ¸ : Spring Bootë¥¼ ì‚¬ìš©í•˜ë©´ì„œ JPAë¥¼ ì‚¬ìš©   
> => " JPAì™€ Hibernateë¥¼ ê°™ì´ í™œìš©"

### JPAì™€ Hibernate
JPA - Java Persistence API(Jakarta Persistence API)
- ORM(Object Relational Mapping) **ê¸°ìˆ ì˜ ì¼ì¢…**( != ORM ê¸°ìˆ )
- ë°ì´í„°ê°€ ì–´ë–»ê²Œ í…Œì´ë¸”ì— ë§¤í•‘ë˜ëŠ”ì§€ í‘œí˜„í•˜ê¸° ìœ„í•œ ëª…ì„¸ ë°©ì‹
- ì¸í„°í˜ì´ìŠ¤ì™€ ì–´ë…¸í…Œì´ì…˜ìœ¼ë¡œ êµ¬ì„±
```java
@Entity
public class Student {}  // ì´ ê°ì²´ê°€ ë°ì´í„°ë² ì´ìŠ¤ ì—”í‹°í‹°ì„ì„ í‘œì‹œ
```
Hibernate
- JPA ëª…ì„¸ë¥¼ ë°”íƒ•ìœ¼ë¡œ ì‘ë™í•˜ëŠ” ORM í”„ë ˆì„ì›Œí¬
- JPAë¡œ í‘œí˜„ëœ ê°ì²´ë¥¼ ì‹¤ì œ ë°ì´í„°ë² ì´ìŠ¤ì— ì ìš© ë° ì‚¬ìš©

---
### JPA í”„ë¡œì íŠ¸ ì„¤ì •
- `yaml` ì„¤ì •
```yaml
spring:
  datasource:
    url: jdbc:sqlite:db.sqlite
    driver-class-name: org.sqlite.JDBC
    # username: sa
    # password: password
  jpa:
    hibernate:
      ddl-auto: create
    show-sql: true
    database-platform: org.hibernate.community.dialect.SQLiteDialect

```
- ê¸°ë³¸ì ì¸ Database ê´€ë ¨ ì„¤ì •
  - `spring.datasource.url` : ì‚¬ìš©í•  ë°ì´í„°ë² ì´ìŠ¤ì˜ JDBC URL 
  - `spring.datasource.driver-class-name` : ì‚¬ìš©í•  JDBC Driver í´ë˜ìŠ¤ 
  - `spring.datasource.username` : (í•„ìš”ì‹œ) ë°ì´í„°ë² ì´ìŠ¤ ì‚¬ìš©ì ì•„ì´ë”” 
  - `spring.datasource.password` : (í•„ìš”ì‹œ) ë°ì´í„°ë² ì´ìŠ¤ ì‚¬ìš©ì ë¹„ë°€ë²ˆí˜¸


- jpa ê´€ë ¨ ì„¤ì •
  - `spring.jpa.hibernate.ddl-auto` : Hibernateê°€ Entity ê°ì²´ë¥¼ ì ìš©í•˜ê¸° ìœ„í•œ DDLì„ ì–´ë–»ê²Œ ì‹¤í–‰í• ì§€
    - `create` : ì´ì „ ë°ì´í„°ë¥¼ ì œê±°í•˜ê³  ìŠ¤í‚¤ë§ˆ ìƒì„±
    - `create-drop` : ì‹¤í–‰ì‹œ ìŠ¤í‚¤ë§ˆ ìƒì„±, ì¢…ë£Œì‹œ ìŠ¤í‚¤ë§ˆ ì œê±°
    - `update` : í•„ìš”ì‹œ ìŠ¤í‚¤ë§ˆ ê°±ì‹ 
    - `none` : ìŠ¤í‚¤ë§ˆë¥¼ ê±´ë“œë¦¬ì§€ ì•ŠìŒ
  - `spring.jpa.show-sql` : Hibernateê°€ ì‹¤ì œë¡œ ì‹¤í–‰í•œ SQLì„ ì½˜ì†”ì—ì„œ í™•ì¸í• ì§€ì— ëŒ€í•œ ì„¤ì •
  - `spring.jpa.database-platform` : Hibernateì—ì„œ ì‚¬ìš©í•  SQL Dialect(ë°©ì–¸)
    - `Dialect` : ê´€ê³„í˜• ë°ì´í„°ë² ì´ìŠ¤ì— ë”°ë¼ SQLì˜ ì°¨ì´ê°€ ìˆëŠ” ê²ƒ
---
### Entity ì‘ì„±
- ë°ì´í„°ë² ì´ìŠ¤ì— ë“¤ì–´ê°€ëŠ” ë°ì´í„°ë¥¼ í´ë˜ìŠ¤ì˜ í˜•íƒœë¡œ í‘œí˜„í•˜ê³ ì í•œë‹¤ë©´, í•´ë‹¹ ë°ì´í„°ë¥¼ ë¬˜ì‚¬í•œ í´ë˜ìŠ¤ì— `@Entity` ì–´ë…¸í…Œì´ì…˜ì„ ì¶”ê°€
```java
@Data  // Lombok
@Entity
public class Student {
    private Long id;
    private String name;
    private Integer age;
    private String phone;
    private String email;
}
```
- `@Entity` ì–´ë…¸í…Œì´ì…˜ì´ ë¶™ìœ¼ë©´ ë°˜ë“œì‹œ `@Id`ë¡œ í…Œì´ë¸”ì˜ PKë¥¼ ì§€ì •í•´ì•¼ í•¨
- `@GeneratedValue(strategy = GenerationType.IDENTITY)` : PK ìë™ ì¦ê°€ ê´€ë ¨ ì„¤ì •
```java
@Data  // Lombok
@Entity
public class Student {
    @Id
    @GeneratedValue(strategy = GenerationType.IDENTITY)
    private Long id;
    private String name;
    private Integer age;
    private String phone;
    private String email;
}
```
> ğŸ’¡ ì‹¤í–‰í•˜ë©´ Databaseì— í…Œì´ë¸”ì´ ìƒì„±ë¨
----
- `@Table`
```java
@Table(name = "student")  // ìƒì„±ë˜ëŠ” í…Œì´ë¸”ì˜ ì´ë¦„ì„ "student"ë¡œ
```
- `@Column`
```java
// Unique Constraint ë° ì»¬ëŸ¼ ì´ë¦„ ì§€ì •
@Column(name = "username", unique = true) 
```