## Authorization
### ê¶Œí•œì— ë”°ë¥´ ì ‘ê·¼ ì œì–´
- `authorizeRequests()`
  - ì¸ì¦ì´ í•„ìš”í•œì§€ ì„¤ì •
  - ê¶Œí•œì— ë”°ë¥¸ ì ‘ê·¼ì œì–´ ì„¤ì •
- ì„œë¡œ ë‹¤ë¥¸ ì—­í• ê³¼ ê¶Œí•œì„ ê°€ì§„ ë‘ ì‚¬ìš©ìž
```text
public JpaUserDetailsManager(
        UserRepository userRepository,
        PasswordEncoder passwordEncoder
) {
        this.userRepository = userRepository;
        createUser(CustomUserDetails.builder()
                .username("user")
                .password(passwordEncoder.encode("password"))
                .email("user1@gamil.com")
                .phone("01012345678")
                .authorities("ROLE_USER,READ_AUTHORITY")
                .build());
        
        createUser(CustomUserDetails.builder()
                .username("admin")
                .password(passwordEncoder.encode("password"))
                .email("admin@gmail.com")
                .phone("0102345678")
                .authorities("ROLE_ADMIN,WRITE_AUTHORITY")
                .build());
}
```
- `username`ì´ `user`ì¸ ì‚¬ìš©ìžëŠ” `USER`Roleê³¼ `READ_AUTHORITY` Authorityë¥¼ ê°€ì§€ê³ 
- `username`ì´ `admin`ì¸ ì‚¬ìš©ìžëŠ” `ADMIN`Roleê³¼ `WRITE_AUTHORITY`Authorityë¥¼ ê°€ì§


- í…ŒìŠ¤íŠ¸ë¥¼ ìœ„í•œ `AuthenticationController`
```java
@Slf4j
@RestController
@RequestMapping("/auth")
public class AuthorizationController {
    // ROLE_USERë¥¼ ê°€ì¡Œì„ ë•Œ ìš”ì²­ ê°€ëŠ¥
    @GetMapping("/user-role")
    public String userRole() {
        return "userRole";
    }

    // ROLE_ADMINì„ ê°€ì¡Œì„ ë•Œ ìš”ì²­ ê°€ëŠ¥
    @GetMapping("/admin-role")
    public String adminRole() {
        return "adminRole";
    }

    @GetMapping("/read-authority")
    public String readAuthority() {
        return "readAuthority";
    }

    @GetMapping("/write-authority")
    public String writeAuthority() {
        return "writeAuthority";
    }
}
```
- `/auth/user-role`ì€ `USER`Roleì„ ê°€ì§„ ì‚¬ìš©ìžë§Œ ì ‘ê·¼ ê°€ëŠ¥
- `/auth/admin-role`ì€ `ADMIN`Roleì„ ê°€ì§„ ì‚¬ìš©ìžë§Œ ì ‘ê·¼ ê°€ëŠ¥
- `/auth/write-authority`ëŠ” `WRITE_AUTHORITY`ë¥¼ ê°€ì¡Œì„ ë•Œ ì ‘ê·¼ ê°€ëŠ¥
- `/auth/read-authority`ëŠ” `READ_AUTHORITY`ë¥¼ ê°€ì¡Œì„ ë•Œ ì ‘ê·¼ ê°€ëŠ¥
----
### Roleì— ë”°ë¥¸ ì ‘ê·¼ ì œì–´
- `hasRole()`: ì£¼ì–´ì§„ ì¸ìž ì¤‘ í•˜ë‚˜ë¼ë„
- `hasAnyRole()`: ì£¼ì–´ì§„ ì¸ìžë¥¼ ì •í™•í•˜ê²Œ
- `GrantedAuthority`ë¥¼ ë§Œë“¤ë–„ëŠ” `ROLE_`ì„ ë¶™ì—¬ì„œ ë§Œë“¤ì§€ë§Œ ì‹¤ì œ Roleì„ ì§€ì •í•  ë•ŒëŠ” `ROLE_`ìƒëžµ
```java
@Bean
public SecurityFilterChain securityFilterChain(HttpSecurity http)
    throws Exception {
    http
            .authorizeHttpRequests(
                    authHttp -> authHttp
                            // ...
                            .requestMatchers("/auth/user-role")
                            .hasAnyRole("USER", "ADMIN")
        
                            .requestMatchers("/auth/admin-role")
                            .hasRole("ADMIN")
                            // ...
            )
            // ...
    ;
    return http.build();
}
```
---
### Authorityì— ë”°ë¥¸ ì ‘ê·¼ ì œì–´
- `hasAnyAuthority()`: ì£¼ì–´ì§„ ì¸ìž ì¤‘ í•˜ë‚˜ë¼ë„
- `hasAuthority()`: ì£¼ì–´ì§„ ì¸ìžë¥¼ ì •í™•í•˜ê²Œ
- ðŸ’¡ ê¶Œí•œì˜ ì´ë¦„ ì „ì²´ë¥¼ ì ì–´ì•¼ í•¨!

```java
@Bean
public SecurityFilterChain securityFilterChain(HttpSecurity http)
    throws Exception {
    http
            .authorizeHttpRequests(
                    authHttp -> authHttp
                            // ...
                            .requestMatchers("/auth/read-authority")
                            .hasAuthority("READ_AUTHORITY")
        
                            .requestMatchers("/auth/write-authority")
                            .hasAnyAuthority("WRITE_AUTHORITY")
                            // ...
            )
            // ...
    ;
    return http.build();
}
```